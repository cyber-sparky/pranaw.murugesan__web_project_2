<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scriptify</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="../assets/css/forum.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <!-- header starting -->
    <header>
        <div>
            <h2>Scryptify</h2>
        </div>
        <nav>
            <a href="../course/course.html"><button>Home</button></a>
            <a href="#"><button>About</button></a>
            <a href="../profile/profile.html"><button>Profile</button></a>
        </nav>
    </header>

    <div class="askingQuestion">
        <button type="button" id="closeBtn" class="btn-close" aria-label="Close"></button>
        <form id="questionForm">
            <div class="mb-3">
                <label for="questionName" class="form-label">What's your Question?</label>
                <input type="text" class="form-control" id="questionName" required>
            </div>
            <div class="mb-3">
                <label for="questionDesc" class="form-label">Describe your question...</label>
                <textarea class="form-control" id="questionDesc" rows="3" required></textarea>
                <p>Select Tags</p>
                <div class="selectTags">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="linux">
                        <label class="form-check-label" for="flexCheckDefault" >
                          linux
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" >
                        <label class="form-check-label" for="flexCheckDefault" >
                          windows
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value=""id="hacking">
                        <label class="form-check-label" for="flexCheckDefault" >
                            hacking
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="macos">
                        <label class="form-check-label" for="flexCheckDefault" >
                          macos
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="python">
                        <label class="form-check-label" for="flexCheckDefault" >
                          python
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="javascript">
                        <label class="form-check-label" for="flexCheckDefault" >
                          javascript
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="mysql">
                        <label class="form-check-label" for="flexCheckDefault" >
                          mysql
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="scripting">
                        <label class="form-check-label" for="flexCheckDefault" >
                          scripting
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="lua">
                        <label class="form-check-label" for="flexCheckDefault" >
                          lua
                        </label>
                      </div>
                </div>
            </div>
            <button class="btn btn-success">Submit</button>
        </form>
    </div>
    <div class="mainDiv">
        <aside>
            <a href="#">Questions</a>
            <a href="#">Tags</a>
            <a href="">Users</a>
            <a href="">Your Answers</a>
        </aside>
        <main>
            <div class="questionHeads">
                <div>
                    <h2>Top Questions</h2>
                </div>
                <div><button type="button" id="ask" class="btn btn-primary">Ask a Question</button></div>
            </div>
            <div id="categories" class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-outline-secondary">Interesting</button>
                <button type="button" class="btn btn-outline-secondary">Hot</button>
                <button type="button" class="btn btn-outline-secondary">Week</button>
                <button type="button" class="btn btn-outline-secondary">Month</button>
            </div>
            <hr id="questionsAppend">
        </main>
        <div id="rightsidebar">
            <div class="SideBar">
                <div class="titleHead"><strong>Watch tags</strong></div>
                <div class="tags">
                    <a href="">artificial-intelligence</a>
                    <a href="">css</a>
                    <a href="">database</a>
                    <a href="">html</a>
                    <a href="">html</a>
                    <a href="">javascript</a>
                    <a href="">linux</a>
                    <a href="">python</a>
                </div>
            </div>
            <div class="SideBar">
                <div class="titleHead"><strong>Custom Filters</strong></div>
                <div class="tags">
                    <a href="">Create a custom filter</a>
                </div>
            </div>
            <div class="SideBar">
                <div class="titleHead"><strong>Ignored Tags</strong></div>
                <div class="tags">
                    <a href="">Add an ignored tag</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let userData = JSON.parse(localStorage.getItem("userData"))
        let askQuestionBtn = document.getElementById("ask")
        let askQuestionDiv = document.getElementsByClassName("askingQuestion")
        askQuestionBtn.addEventListener("click", function () {
            askQuestionDiv[0].classList.add("view")
            document.querySelector(".mainDiv").style.filter = "blur(8px)"
            document.querySelector("header").style.filter = "blur(8px)"
        })
        
        document.querySelector("#closeBtn").addEventListener("click", function () {
            askQuestionDiv[0].classList.remove("view")
            document.querySelector(".mainDiv").style.filter = null
            document.querySelector("header").style.filter = null
        })
        let Questions;

        let questionName;
        let questionDesc;
        let userQuestions;
        let profile = JSON.parse(localStorage.getItem("profile"))
        askQuestionForm = document.getElementById("questionForm")
        let currentUser;
        userData.find(element =>{
            if (element["email"] == profile["email"]) {
                currentUser = element["email"]
            }
        })

        askQuestionForm.addEventListener("submit", function () {
            if (JSON.parse(localStorage.getItem("forum"))) {
                Questions = JSON.parse(localStorage.getItem("forum"))
            } else {
                Questions = []
    
            }
            questionName = document.getElementById("questionName").value
            questionDesc = document.getElementById("questionDesc").value
            let id = Math.floor(Math.random() * 100);
            userQuestions = {
              "id" : id,
                "user":currentUser,
                "questionName": questionName,
                "questionDesc": questionDesc,
                "answer":[]
            }
            Questions.push(userQuestions)
            localStorage.setItem("forum", JSON.stringify(Questions))
            // window.location.href="./forum.html"
            
                      
        })
        

let answer = JSON.parse(localStorage.getItem("forum"))

if (localStorage.getItem("forum")) {
    for (let i = 0; i < answer.length; i++) {
    var newQuestion = document.createElement("div");
  newQuestion.className = "questionContainer";
  
  // add the HTML content to the div
  newQuestion.innerHTML = `
    <div class="firstSection">
      <ul>
        <li>0 votes</li>
        <li>2 answers</li>
        <li>23 views</li>
      </ul>
    </div>
    <div class="secondSection">
      <p class="question">${answer[i]["questionName"]}</p>
      <a href="#">Sql</a>
      <a href="#">MySql</a>
      <a href="#">Hacking</a>
    </div>
  `;
  
  // append the new div to the container
  var container = document.querySelector("main");
  container.appendChild(newQuestion);

  let name = document.querySelectorAll(".question")

  name[i].addEventListener("click",function () {
  
    window.location.href = "./answer.html?id="+answer[i]["id"]
  })


}
}

        
        
    </script>
</body>

</html>