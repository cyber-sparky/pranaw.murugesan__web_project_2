<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scriptify</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="../assets/css/login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="../assets/js/sweetAlert.js"></script>

</head>

<body>
  <!-- header starting -->
  <header>

    <div>
      <h2>Scryptify</h2>
    </div>
    <nav>
      <a href="../index.html"><button>Home</button></a>
      <a href="#"><button>About</button></a>
    </nav>
    <img id="wave" src="../assets/img/wave-haikei.png" alt="">
  </header>
  <!-- header end -->

  <!-- Form starts here -->
  <form id="form">
    <div class="mb-3">
      <label for="email" class="form-label">Email address</label>
      <input type="email" class="form-control" id="email" aria-describedby="emailHelp" required>
      <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Password</label>
      <input type="password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" class="form-control" id="password" required>
    </div>
    <button class="btn btn-primary">Login</button>
  </form>
  <button id="dontHaveAccount" class="btn btn-link dontHaveAccount">Don't have account</button>


  <script>
    // declaring variables
    let form = document.getElementById("form")
    let dontHaveAccount = document.getElementById('dontHaveAccount')
    // performing login function
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      login()
    })
    // redirecting to signup Page
    dontHaveAccount.addEventListener("click", function () {
      window.location.href = "./signup.html"
    })
    function login() {
      // declaring variables for login
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const arr = JSON.parse(localStorage.getItem("userData")); //variable for localStorage
      
      let login = {
        "email": email
      }
      let res;
      arr.find(element => {
        if (element["email"] == email && element["password"] == password) {
          return res = 1
        } else {
          return res = 0;
        }
      })
      if (res === 1) {
        // alert("Logged in")
        swal("Hooyah !", "You have logged in !")
          .then((value) => {
            localStorage.setItem("profile", JSON.stringify(login))
            window.location.href = "../course/course.html"
          });

      } else {
        // alert('Account doesn\'t exist')
        swal("Sorry :(", "Account doesn't exist!", "error");

      }
    }

  </script>
</body>

</html>